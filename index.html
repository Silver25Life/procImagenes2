<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>AR Trivia Países</title>

	<!-- A-Frame y MindAR -->
	<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

	<!-- Componente de onda para banderas -->
	<script>
		AFRAME.registerComponent('flag-wave', {
			schema: {
				amplitude: {type: 'number', default: 0.05},
				speed: {type: 'number', default: 2},
				frequency: {type: 'number', default: 5}
			},
			init: function () {
				this.vertices = null;
				this.originalPositions = null;
				this.time = 0;
			},
			tick: function (time) {
				this.time = time / 1000;
				this.waveEffect();
			},
			waveEffect: function () {
				const mesh = this.el.getObject3D('mesh');
				if (!mesh) return;

				const geometry = mesh.geometry;
				if (!this.vertices) {
					this.vertices = geometry.attributes.position.array;
					this.originalPositions = this.vertices.slice();
				}

				const data = this.data;

				for (let i = 0; i < this.vertices.length; i += 3) {
					const x = this.originalPositions[i];
					const z = this.originalPositions[i + 2];
					const wave = Math.sin(x * data.frequency + this.time * data.speed) * data.amplitude;
					this.vertices[i + 1] = this.originalPositions[i + 1] + wave;
				}

				geometry.attributes.position.needsUpdate = true;
				geometry.computeVertexNormals();
			}
		});
	</script>

	<!-- CSS -->
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<!-- Botones principales -->
	<div id="uiButtons">
		<button id="triviaButton">Mostrar Trivia</button>
		<button id="filterButton">Filtros</button>
		<button id="videoButton">Ver Video</button>
		<button id="animButton">Ondear Bandera</button>
	</div>

	<!-- Modal de Trivia -->
	<div id="triviaModal" class="modal">
		<div class="modal-content">
			<span id="closeModal" class="close">&times;</span>
			<h3 id="preguntaText"></h3>
			<div class="opciones-container">
				<button class="opcion-btn" data-opcion="1">
					<span class="opcion-letra">A</span>
					<span class="opcion-texto" id="opcion1"></span>
				</button>
				<button class="opcion-btn" data-opcion="2">
					<span class="opcion-letra">B</span>
					<span class="opcion-texto" id="opcion2"></span>
				</button>
				<button class="opcion-btn" data-opcion="3">
					<span class="opcion-letra">C</span>
					<span class="opcion-texto" id="opcion3"></span>
				</button>
			</div>
			<div id="resultado" class="resultado"></div>
		</div>
	</div>

	<!-- Modal de YouTube -->
	<div id="youtubeModal" class="modal">
		<div class="modal-content youtube-modal">
			<span id="closeYoutube" class="close">&times;</span>
			<div id="youtubePlayer"></div>
		</div>
	</div>

	<!-- Escena AR -->
	<a-scene mindar-image="imageTargetSrc: pais.mind; autoStart: true; uiScanning: no; uiError: no;"
		vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false" embedded>

		<!-- Targets para cada bandera - TEXTO COMPACTO PARA MÓVIL -->
		<!-- targetIndex: 0 --><a-entity mindar-image-target="targetIndex: 0" id="arabiaSauditaTarget">
			<a-plane id="banderaArabiaSaudita" src="#arabiaSauditaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Espada = Justicia; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 1 --><a-entity mindar-image-target="targetIndex: 1" id="argeliaTarget">
			<a-plane id="banderaArgelia" src="#argeliaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Luna y estrella verde; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 2 --><a-entity mindar-image-target="targetIndex: 2" id="argentinaTarget">
			<a-plane id="banderaArgentina" src="#argentinaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Sol de Mayo central; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 3 --><a-entity mindar-image-target="targetIndex: 3" id="australiaTarget">
			<a-plane id="banderaAustralia" src="#australiaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Cruz del Sur; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 4 --><a-entity mindar-image-target="targetIndex: 4" id="brasilTarget">
			<a-plane id="banderaBrasil" src="#brasilImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Orden y Progreso; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 5 --><a-entity mindar-image-target="targetIndex: 5" id="caboVerdeTarget">
			<a-plane id="banderaCaboVerde" src="#caboVerdeImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: 10 estrellas = 10 islas; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 6 --><a-entity mindar-image-target="targetIndex: 6" id="canadaTarget">
			<a-plane id="banderaCanada" src="#canadaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Hoja de arce 11 puntas; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 7 --><a-entity mindar-image-target="targetIndex: 7" id="catarTarget">
			<a-plane id="banderaCatar" src="#catarImg" height="0.5" width="0.8" rotation="0 0 0"></a-plane>
			<a-entity text="value: Color granate único; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 8 --><a-entity mindar-image-target="targetIndex: 8" id="colombiaTarget">
			<a-plane id="banderaColombia" src="#colombiaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Amarillo=riqueza; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 9 --><a-entity mindar-image-target="targetIndex: 9" id="coreaDelSurTarget">
			<a-plane id="banderaCoreaDelSur" src="#coreaDelSurImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Taegeuk central; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 10 --><a-entity mindar-image-target="targetIndex: 10" id="costaDeMarfilTarget">
			<a-plane id="banderaCostaDeMarfil" src="#costaDeMarfilImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Naranja=sabana; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 11 --><a-entity mindar-image-target="targetIndex: 11" id="ecuadorTarget">
			<a-plane id="banderaEcuador" src="#ecuadorImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Cóndor en escudo; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 12 --><a-entity mindar-image-target="targetIndex: 12" id="egiptoTarget">
			<a-plane id="banderaEgipto" src="#egiptoImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Águila de Saladino; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 13 --><a-entity mindar-image-target="targetIndex: 13" id="ghanaTarget">
			<a-plane id="banderaGhana" src="#ghanaImg" height="0.5" width="0.8" rotation="0 0 0"></a-plane>
			<a-entity text="value: Estrella negra; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 14 --><a-entity mindar-image-target="targetIndex: 14" id="inglaterraTarget">
			<a-plane id="banderaInglaterra" src="#inglaterraImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Cruz de San Jorge; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 15 --><a-entity mindar-image-target="targetIndex: 15" id="iranTarget">
			<a-plane id="banderaIran" src="#iranImg" height="0.5" width="0.8" rotation="0 0 0"></a-plane>
			<a-entity text="value: Allahu Akbar 22x; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 16 --><a-entity mindar-image-target="targetIndex: 16" id="japonTarget">
			<a-plane id="banderaJapon" src="#japonImg" height="0.5" width="0.8" rotation="0 0 0"></a-plane>
			<a-entity text="value: Disco solar rojo; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 17 --><a-entity mindar-image-target="targetIndex: 17" id="jordaniaTarget">
			<a-plane id="banderaJordania" src="#jordaniaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Estrella 7 puntas; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 18 --><a-entity mindar-image-target="targetIndex: 18" id="marruecosTarget">
			<a-plane id="banderaMarruecos" src="#marruecosImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Estrella verde; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 19 --><a-entity mindar-image-target="targetIndex: 19" id="mexicoTarget">
			<a-plane id="banderaMexico" src="#mexicoImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Águila y serpiente; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 20 --><a-entity mindar-image-target="targetIndex: 20" id="nuevaZelandaTarget">
			<a-plane id="banderaNuevaZelanda" src="#nuevaZelandaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: 4 estrellas; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 21 --><a-entity mindar-image-target="targetIndex: 21" id="paraguayTarget">
			<a-plane id="banderaParaguay" src="#paraguayImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: 2 escudos; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 22 --><a-entity mindar-image-target="targetIndex: 22" id="senegalTarget">
			<a-plane id="banderaSenegal" src="#senegalImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Estrella verde; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 23 --><a-entity mindar-image-target="targetIndex: 23" id="sudafricaTarget">
			<a-plane id="banderaSudafrica" src="#sudafricaImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Forma de Y; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 24 --><a-entity mindar-image-target="targetIndex: 24" id="tunezTarget">
			<a-plane id="banderaTunez" src="#tunezImg" height="0.5" width="0.8" rotation="0 0 0"></a-plane>
			<a-entity text="value: Luna y estrella; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 25 --><a-entity mindar-image-target="targetIndex: 25" id="uruguayTarget">
			<a-plane id="banderaUruguay" src="#uruguayImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: Sol y 9 franjas; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 26 --><a-entity mindar-image-target="targetIndex: 26" id="usaTarget">
			<a-plane id="banderaUSA" src="#usaImg" height="0.5" width="0.8" rotation="0 0 0"></a-plane>
			<a-entity text="value: 50 estrellas; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<!-- targetIndex: 27 --><a-entity mindar-image-target="targetIndex: 27" id="uzbekistanTarget">
			<a-plane id="banderaUzbekistan" src="#uzbekistanImg" height="0.5" width="0.8"
				rotation="0 0 0"></a-plane>
			<a-entity text="value: 12 estrellas; align: center; color: #FFFFFF; width: 2.5"
				position="0 0.6 0"></a-entity>
		</a-entity>

		<a-assets>
			<!-- Imágenes de todas las banderas - NOMBRES EXACTOS -->
			<img id="arabiaSauditaImg" src="arabiaSaudita.jpg" crossorigin="anonymous" />
			<img id="argeliaImg" src="argelia.jpg" crossorigin="anonymous" />
			<img id="argentinaImg" src="argentina.jpg" crossorigin="anonymous" />
			<img id="australiaImg" src="australia.jpg" crossorigin="anonymous" />
			<img id="brasilImg" src="brazil.jpg" crossorigin="anonymous" />
			<img id="caboVerdeImg" src="caboVerde.jpg" crossorigin="anonymous" />
			<img id="canadaImg" src="canada.jpg" crossorigin="anonymous" />
			<img id="catarImg" src="catar.jpg" crossorigin="anonymous" />
			<img id="colombiaImg" src="colombia.jpg" crossorigin="anonymous" />
			<img id="coreaDelSurImg" src="coreaDelSur.jpg" crossorigin="anonymous" />
			<img id="costaDeMarfilImg" src="costaDeMarfil.jpg" crossorigin="anonymous" />
			<img id="ecuadorImg" src="ecuador.jpg" crossorigin="anonymous" />
			<img id="egiptoImg" src="egipto.jpg" crossorigin="anonymous" />
			<img id="ghanaImg" src="ghana.jpg" crossorigin="anonymous" />
			<img id="inglaterraImg" src="inglaterra.jpg" crossorigin="anonymous" />
			<img id="iranImg" src="iran.jpg" crossorigin="anonymous" />
			<img id="japonImg" src="japon.jpg" crossorigin="anonymous" />
			<img id="jordaniaImg" src="jordania.jpg" crossorigin="anonymous" />
			<img id="marruecosImg" src="marruecos.jpg" crossorigin="anonymous" />
			<img id="mexicoImg" src="mexico.jpg" crossorigin="anonymous" />
			<img id="nuevaZelandaImg" src="nuevaZelanda.jpg" crossorigin="anonymous" />
			<img id="paraguayImg" src="paraguay.jpg" crossorigin="anonymous" />
			<img id="senegalImg" src="senegal.jpg" crossorigin="anonymous" />
			<img id="sudafricaImg" src="sudafrica.jpg" crossorigin="anonymous" />
			<img id="tunezImg" src="tunez.jpg" crossorigin="anonymous" />
			<img id="uruguayImg" src="uruguay.jpg" crossorigin="anonymous" />
			<img id="usaImg" src="usa.jpg" crossorigin="anonymous" />
			<img id="uzbekistanImg" src="uzbekistán.jpg" crossorigin="anonymous" />
		</a-assets>

		<a-camera position="0 0 0" look-controls="enabled: false" active="true"></a-camera>
	</a-scene>

	<!-- Scripts modulares -->
	<script src="countryManager.js"></script>
	<script src="triviaManager.js"></script>
	<script src="videoManager.js"></script>
	<script src="animationManager.js"></script>
	<script src="filterManager.js"></script>
	<script src="uiManager.js"></script>
	<script src="app.js"></script>
</body>

</html>
